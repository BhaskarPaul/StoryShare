"use strict";(self.webpackChunktry_firebase=self.webpackChunktry_firebase||[]).push([[944],{6793:function(e,t,n){n(2791);var r=n(1762),s=n(3329),i=n(184);t.Z=function(e){var t=e.message,n=e.handleClose;return(0,i.jsx)("div",{style:{marginTop:"30px",borderRadius:"10px"},children:(0,i.jsxs)(r.bZ,{status:"error",children:[(0,i.jsx)(r.zM,{}),(0,i.jsx)(r.Cd,{mr:2,children:t}),(0,i.jsx)(s.P,{onClick:n,position:"absolute",right:"8px",top:"8px"})]})})}},9547:function(e,t,n){n.d(t,{Z:function(){return N}});var r=n(2982),s=n(5861),i=n(1413),a=n(885),c=n(7757),o=n.n(c),l=n(2791),u=n(855),d=n(8735),h=n(3046),x=n(7805),p=(n(3508),n(2134)),m=n(9062),v=n(292),g=n(6793),j=n(9373),f=n(7948),y=n.n(f),b=n(3393),k=n(5798),S=n(6123),Z=n(3445),w=n(184),C=function(e){var t=e.story,n=e.newStory,r=e.setNewStory,s=e.submitEditStory,c=e.editButtonLoading,o=(0,l.useState)(!1),u=(0,a.Z)(o,2),h=u[0],p=u[1];return(0,l.useEffect)((function(){t.heading===n.heading&&t.content===n.content&&t.type===n.type?p(!1):p(!0)}),[t,n]),(0,w.jsx)("div",{children:(0,w.jsxs)(b.NI,{isRequired:!0,children:[(0,w.jsx)(b.lX,{htmlFor:"story-heading",children:"Heading"}),(0,w.jsx)(k.II,{id:"story-heading",type:"text",placeholder:"Your story heading...",value:n.heading,onChange:function(e){return r((0,i.Z)((0,i.Z)({},n),{},{heading:e.target.value}))}}),(0,w.jsx)(b.lX,{htmlFor:"story-content",children:"Content"}),(0,w.jsx)(S.g,{placeholder:"Your story content...",value:n.content,onChange:function(e){return r((0,i.Z)((0,i.Z)({},n),{},{content:e.target.value}))}}),(0,w.jsx)(b.lX,{children:"Want to change story cover image?"}),(0,w.jsx)(k.II,{type:"file"}),(0,w.jsx)(b.lX,{as:"legend",children:"Select your story privacy"}),(0,w.jsx)(Z.Ee,{defaultValue:n.type,onChange:function(e){return r((0,i.Z)((0,i.Z)({},n),{},{type:e}))},children:(0,w.jsxs)(d.Ug,{spacing:"24px",children:[(0,w.jsx)(Z.Y8,{value:"public",children:"Public"}),(0,w.jsx)(Z.Y8,{value:"private",children:"Private"})]})}),(0,w.jsx)(x.zx,{isLoading:c,disabled:!h,colorScheme:"teal",variant:"solid",onClick:s,children:"Edit story"})]})})},I=function(e){var t=e.cancelDeleteProcess,n=e.deleteStory,r=e.isLoading;return(0,w.jsx)("div",{children:(0,w.jsxs)(d.Kq,{children:[(0,w.jsx)(d.X6,{className:"confirm-window-heading",children:"Are you sure to delete this story?"}),(0,w.jsx)("div",{children:(0,w.jsxs)(d.Ug,{children:[(0,w.jsx)(x.zx,{onClick:t,colorScheme:"green",children:"Cancel"}),(0,w.jsx)(x.zx,{onClick:n,colorScheme:"red",isLoading:r,children:"Delete Story"})]})})]})})};y().setAppElement("#root");var N=function(e){var t=e.story,n=e.type,c=(0,l.useContext)(j.T),f=(0,l.useState)({count:0,state:"Like"}),b=(0,a.Z)(f,2),k=b[0],S=b[1],Z=(0,l.useState)({visible:!1,message:""}),N=(0,a.Z)(Z,2),L=N[0],U=N[1],z=(0,l.useState)({edit:!1,delete:!1}),D=(0,a.Z)(z,2),E=D[0],M=D[1],O=(0,l.useState)({heading:t.heading,content:t.content,type:t.type}),T=(0,a.Z)(O,2),A=T[0],J=T[1];(0,l.useEffect)((function(){S((0,i.Z)((0,i.Z)({},k),{},{count:t.likes}))}),[]);var Y=function(){var e=(0,s.Z)(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Like"!==k.state){e.next=7;break}return S({state:"Dislike",count:k.count+1}),e.next=4,q(t.storyId);case 4:return n=e.sent,e.next=7,(0,m.r7)((0,m.JU)(v.db,"stories",n),{likes:t.likes+1});case 7:return"Dislike"===k.state&&S({state:"Like",count:k.count-1}),e.next=10,q(t.storyId);case 10:return r=e.sent,e.next=13,(0,m.r7)((0,m.JU)(v.db,"stories",r),{likes:t.likes-1});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,s.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.PL)((0,m.IO)((0,m.hJ)(v.db,"stories"),(0,m.ar)("storyId","==",t)));case 3:return n=e.sent,r=n.docs[0].id,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),U({visible:!0,message:e.t0.message}),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,s.Z)(o().mark((function e(){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M((0,i.Z)((0,i.Z)({},E),{},{delete:!0})),e.prev=1,e.next=4,q(t.storyId);case 4:return n=e.sent,e.next=7,(0,m.oe)((0,m.JU)(v.db,"stories",n));case 7:s=c.rootStories.filter((function(e){return e.storyId!==t.storyId})),c.setRootStories((0,r.Z)(s)),B(!1),M((0,i.Z)((0,i.Z)({},E),{},{delete:!1})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),U({visible:!0,message:e.t0.message}),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.Z)(o().mark((function e(){var n,s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M((0,i.Z)((0,i.Z)({},E),{},{edit:!0})),e.prev=1,e.next=4,q(t.storyId);case 4:return n=e.sent,(s=A).createdAt=(0,v.H0)("u"),s.timestamp=Date.now(),e.next=10,(0,m.r7)((0,m.JU)(v.db,"stories",n),s);case 10:a=c.rootStories.map((function(e){return t.storyId===e.storyId?e=(0,i.Z)((0,i.Z)({},e),s):e})),c.setRootStories((0,r.Z)(a)),M((0,i.Z)((0,i.Z)({},E),{},{edit:!1})),B(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),U({visible:!0,message:e.t0.message}),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),R=(0,u.ac)("(min-width: 1000px)"),X=(0,a.Z)(R,1)[0],_=(0,l.useState)(!1),H=(0,a.Z)(_,2),K=H[0],B=H[1],V=(0,l.useState)(""),G=(0,a.Z)(V,2),Q=G[0],W=G[1],$={content:{width:X?"600px":"auto",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"},overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)"}};return(0,w.jsxs)("div",{children:[(0,w.jsxs)(y(),{isOpen:K,onRequestClose:function(){return B(!1)},style:$,contentLabel:"Example Modal",children:["edit"===Q&&(0,w.jsx)(C,{story:t,newStory:A,setNewStory:J,submitEditStory:P,editButtonLoading:E.edit}),"delete"===Q&&(0,w.jsx)(I,{cancelDeleteProcess:function(){B(!1)},deleteStory:F,isLoading:E.delete})]}),L.visible&&(0,w.jsx)(g.Z,{message:L.message,handleClose:function(){return U({visible:!1,message:""})}}),(0,w.jsx)(d.gC,{style:{marginBottom:"30px",overflow:"hidden",width:"100%"},className:"story-card",spacing:5,direction:"column",children:(0,w.jsxs)(d.Kq,{direction:"column",spacing:5,children:[(0,w.jsxs)(d.Kq,{direction:"column",spacing:2,children:[(0,w.jsxs)(d.Ug,{spacing:5,justify:"space-between",children:[(0,w.jsxs)(d.Ug,{children:[(0,w.jsx)(d.X6,{className:"story-heading",size:"lg",children:t.heading}),"private"===t.type?(0,w.jsx)(d.Ct,{colorScheme:"red",style:{borderRadius:"5px"},children:"private"}):(0,w.jsx)(d.Ct,{colorScheme:"green",style:{borderRadius:"5px"},children:"public"})]}),"all"===n&&(0,w.jsx)("div",{children:(0,w.jsxs)("p",{children:[(0,w.jsx)("small",{children:"by "}),t.creatorName]})})]}),(0,w.jsx)("small",{style:{color:"gray",fontSize:"15px"},children:t.createdAt})]}),(0,w.jsx)(d.iz,{}),(0,w.jsx)(h.Ee,{className:"story-img",src:t.url,alt:"cover image"}),(0,w.jsx)(d.iz,{}),(0,w.jsx)("p",{style:{textAlign:"left"},children:t.content}),"user"===n&&(0,w.jsx)("div",{children:(0,w.jsxs)(d.Ug,{spacing:5,children:[(0,w.jsx)(x.zx,{colorScheme:"blue",size:"sm",onClick:function(){return t.storyId,W("edit"),void B(!0)},children:"Edit Story"}),(0,w.jsx)(x.zx,{colorScheme:"red",size:"sm",onClick:function(){return t.storyId,W("delete"),void B(!0)},children:"Delete Story"})]})}),"all"===n&&(0,w.jsxs)("div",{children:[(0,w.jsx)(d.iz,{}),(0,w.jsxs)(d.Ug,{style:{marginTop:"10px"},children:[(0,w.jsx)("p",{children:k.count}),(0,w.jsx)(x.zx,{onClick:Y,colorScheme:"Like"===k.state?"blue":"red",children:(0,w.jsxs)(d.Ug,{children:["Like"===k.state?(0,w.jsx)(p.L7p,{color:"white"}):(0,w.jsx)(p.Ov5,{color:"white"}),(0,w.jsx)("p",{children:k.state})]})})]})]})]})})]})}},1649:function(e,t,n){var r=n(5861),s=n(885),i=n(7757),a=n.n(i),c=n(2791),o=(n(3508),n(855)),l=n(8735),u=n(5857),d=n(6866),h=n(1922),x=n(7805),p=n(2575),m=n(9946),v=n(6871),g=n(3504),j=n(292),f=n(6910),y=n(2134),b=n(184);t.Z=function(e){var t=e.userData,n=(0,v.s0)(),i=(0,v.TH)(),k=(0,f.F_)(j.I8),S=(0,s.Z)(k,3),Z=(S[0],S[1]),w=(S[2],(0,o.ac)("(min-width: 1000px)")),C=(0,s.Z)(w,1)[0],I=(0,c.useState)(!1),N=(0,s.Z)(I,2),L=N[0],U=N[1];if(Z)return(0,b.jsx)(p.BarLoader,{});var z=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.w7)(j.I8);case 2:n("/login",{replace:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D={openMenu:function(){return U(!0)},closeMenu:function(){return U(!1)}};return(0,b.jsxs)("div",{className:"navbar",children:[(0,b.jsxs)(l.Ug,{justify:"space-between",children:[(0,b.jsxs)(g.OL,{to:"/home",children:[" ",(0,b.jsx)(l.X6,{className:"navbar-heading",children:"StoryShare"})]}),C?(0,b.jsx)("div",{children:(0,b.jsxs)(l.Ug,{spacing:10,children:[(0,b.jsx)(g.OL,{to:"/home",className:("/home"===i.pathname&&"navbar-active")+" navbar-link",children:"Your Stories"}),(0,b.jsx)(g.OL,{to:"/feed",className:("/feed"===i.pathname&&"navbar-active")+" navbar-link",children:"Feed"}),(0,b.jsxs)(u.J2,{children:[(0,b.jsx)(u.xo,{children:(0,b.jsxs)(l.Ug,{spacing:5,className:"navbar-user",children:[(0,b.jsx)("p",{children:t.name}),(0,b.jsx)(d.qE,{src:"https://image.shutterstock.com/image-vector/young-man-face-cartoon-260nw-1224888760.jpg"})]})}),(0,b.jsx)(h.h_,{children:(0,b.jsxs)(u.yk,{className:"navbar-user-portal",children:[(0,b.jsx)(u.QH,{}),(0,b.jsx)(u.Yt,{children:"Your Profile"}),(0,b.jsx)(u.us,{}),(0,b.jsx)(u.b,{children:(0,b.jsxs)(l.Ug,{children:[(0,b.jsx)("p",{children:t.email}),(0,b.jsx)(x.zx,{colorScheme:"orange",onClick:z,children:"Sign Out"})]})})]})})]})]})}):(0,b.jsx)("div",{children:L?(0,b.jsx)(y.LHV,{onClick:D.closeMenu}):(0,b.jsx)(y.qTj,{onClick:D.openMenu})})]}),L&&(0,b.jsx)("div",{className:"responsive-navbar",children:(0,b.jsxs)(l.Kq,{spacing:5,children:[(0,b.jsx)(g.OL,{to:"/home",className:("/home"===i.pathname&&"navbar-active")+" navbar-link",children:"Your Stories"}),(0,b.jsx)(g.OL,{to:"/feed",className:("/feed"===i.pathname&&"navbar-active")+" navbar-link",children:"Feed"}),(0,b.jsx)(g.OL,{to:"/profile",className:("/profile"===i.pathname&&"navbar-active")+" navbar-link",children:"Your Profile"}),(0,b.jsx)(x.zx,{colorScheme:"orange",onClick:z,children:"Sign Out"})]})})]})}},8906:function(e,t,n){n.d(t,{l:function(){return r}});var r=(0,n(2426).ZF)({apiKey:"AIzaSyCApb_p7Vv_9bMAlMMa0-mcG4tK0TZlTps",authDomain:"test-12102.firebaseapp.com",projectId:"test-12102",storageBucket:"test-12102.appspot.com",messagingSenderId:"495225076133",appId:"1:495225076133:web:8de677969340b46d96504c"})},292:function(e,t,n){n.d(t,{I8:function(){return l},db:function(){return u},Js:function(){return d},H0:function(){return h}});var r=n(5861),s=n(7757),i=n.n(s),a=n(9946),c=n(9062),o=n(8906),l=(0,a.v0)(o.l),u=(0,c.ad)(o.l),d=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,s,o,d,h,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.firstName,r=t.lastName,s=t.email,o=t.password,d=t.checkbox,e.next=4,(0,a.Xb)(l,s,o);case 4:return h=e.sent,x=h.user,e.next=8,(0,c.ET)((0,c.hJ)(u,"users"),{_id:x.uid,name:n+" "+r,firstName:n,lastName:r,email:s,authType:"e&p",termsAcceptation:d});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.log("error",e.t0.message),e.abrupt("return",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=new Date,n=t.getUTCMonth(),r=t.getUTCDate(),s=t.getUTCFullYear();return"".concat("c"===e?"created":"updated"," at ").concat(r," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n],", ").concat(s)}}}]);
//# sourceMappingURL=944.efc56ee8.chunk.js.map